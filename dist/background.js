import{g as Ke}from"./assets/_commonjsHelpers-CqkleIqs.js";var X={exports:{}},Le;function Ye(){return Le||(Le=1,(function(o){var a=(function(t){var c=Object.prototype,i=c.hasOwnProperty,l=Object.defineProperty||function(r,e,n){r[e]=n.value},p,w=typeof Symbol=="function"?Symbol:{},P=w.iterator||"@@iterator",b=w.asyncIterator||"@@asyncIterator",I=w.toStringTag||"@@toStringTag";function y(r,e,n){return Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{y({},"")}catch{y=function(e,n,u){return e[n]=u}}function M(r,e,n,u){var s=e&&e.prototype instanceof v?e:v,h=Object.create(s.prototype),L=new J(u||[]);return l(h,"_invoke",{value:Z(r,n,L)}),h}t.wrap=M;function q(r,e,n){try{return{type:"normal",arg:r.call(e,n)}}catch(u){return{type:"throw",arg:u}}}var $="suspendedStart",m="suspendedYield",R="executing",U="completed",S={};function v(){}function k(){}function A(){}var B={};y(B,P,function(){return this});var F=Object.getPrototypeOf,j=F&&F(F(K([])));j&&j!==c&&i.call(j,P)&&(B=j);var D=A.prototype=v.prototype=Object.create(B);k.prototype=A,l(D,"constructor",{value:A,configurable:!0}),l(A,"constructor",{value:k,configurable:!0}),k.displayName=y(A,I,"GeneratorFunction");function x(r){["next","throw","return"].forEach(function(e){y(r,e,function(n){return this._invoke(e,n)})})}t.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===k||(e.displayName||e.name)==="GeneratorFunction":!1},t.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,A):(r.__proto__=A,y(r,I,"GeneratorFunction")),r.prototype=Object.create(D),r},t.awrap=function(r){return{__await:r}};function H(r,e){function n(h,L,O,T){var E=q(r[h],r,L);if(E.type==="throw")T(E.arg);else{var f=E.arg,d=f.value;return d&&typeof d=="object"&&i.call(d,"__await")?e.resolve(d.__await).then(function(g){n("next",g,O,T)},function(g){n("throw",g,O,T)}):e.resolve(d).then(function(g){f.value=g,O(f)},function(g){return n("throw",g,O,T)})}}var u;function s(h,L){function O(){return new e(function(T,E){n(h,L,T,E)})}return u=u?u.then(O,O):O()}l(this,"_invoke",{value:s})}x(H.prototype),y(H.prototype,b,function(){return this}),t.AsyncIterator=H,t.async=function(r,e,n,u,s){s===void 0&&(s=Promise);var h=new H(M(r,e,n,u),s);return t.isGeneratorFunction(e)?h:h.next().then(function(L){return L.done?L.value:h.next()})};function Z(r,e,n){var u=$;return function(h,L){if(u===R)throw new Error("Generator is already running");if(u===U){if(h==="throw")throw L;return V()}for(n.method=h,n.arg=L;;){var O=n.delegate;if(O){var T=G(O,n);if(T){if(T===S)continue;return T}}if(n.method==="next")n.sent=n._sent=n.arg;else if(n.method==="throw"){if(u===$)throw u=U,n.arg;n.dispatchException(n.arg)}else n.method==="return"&&n.abrupt("return",n.arg);u=R;var E=q(r,e,n);if(E.type==="normal"){if(u=n.done?U:m,E.arg===S)continue;return{value:E.arg,done:n.done}}else E.type==="throw"&&(u=U,n.method="throw",n.arg=E.arg)}}}function G(r,e){var n=e.method,u=r.iterator[n];if(u===p)return e.delegate=null,n==="throw"&&r.iterator.return&&(e.method="return",e.arg=p,G(r,e),e.method==="throw")||n!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),S;var s=q(u,r.iterator,e.arg);if(s.type==="throw")return e.method="throw",e.arg=s.arg,e.delegate=null,S;var h=s.arg;if(!h)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S;if(h.done)e[r.resultName]=h.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return h;return e.delegate=null,S}x(D),y(D,I,"Generator"),y(D,P,function(){return this}),y(D,"toString",function(){return"[object Generator]"});function _(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function z(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function J(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(_,this),this.reset(!0)}t.keys=function(r){var e=Object(r),n=[];for(var u in e)n.push(u);return n.reverse(),function s(){for(;n.length;){var h=n.pop();if(h in e)return s.value=h,s.done=!1,s}return s.done=!0,s}};function K(r){if(r){var e=r[P];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var n=-1,u=function s(){for(;++n<r.length;)if(i.call(r,n))return s.value=r[n],s.done=!1,s;return s.value=p,s.done=!0,s};return u.next=u}}return{next:V}}t.values=K;function V(){return{value:p,done:!0}}return J.prototype={constructor:J,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(z),!r)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function n(T,E){return h.type="throw",h.arg=r,e.next=T,E&&(e.method="next",e.arg=p),!!E}for(var u=this.tryEntries.length-1;u>=0;--u){var s=this.tryEntries[u],h=s.completion;if(s.tryLoc==="root")return n("end");if(s.tryLoc<=this.prev){var L=i.call(s,"catchLoc"),O=i.call(s,"finallyLoc");if(L&&O){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(L){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else if(O){if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var n=this.tryEntries.length-1;n>=0;--n){var u=this.tryEntries[n];if(u.tryLoc<=this.prev&&i.call(u,"finallyLoc")&&this.prev<u.finallyLoc){var s=u;break}}s&&(r==="break"||r==="continue")&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var h=s?s.completion:{};return h.type=r,h.arg=e,s?(this.method="next",this.next=s.finallyLoc,S):this.complete(h)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),S},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===r)return this.complete(n.completion,n.afterLoc),z(n),S}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===r){var u=n.completion;if(u.type==="throw"){var s=u.arg;z(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,n){return this.delegate={iterator:K(r),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=p),S}},t})(o.exports);try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}})(X)),X.exports}var ee,Oe;function we(){return Oe||(Oe=1,ee=(o,a)=>`${o}-${a}-${Math.random().toString(16).slice(3,8)}`),ee}var re,Ee;function He(){if(Ee)return re;Ee=1;const o=we();let a=0;return re=({id:t,action:c,payload:i={}})=>{let l=t;return typeof l>"u"&&(l=o("Job",a),a+=1),{id:l,action:c,payload:i}},re}var Y={},be;function Re(){if(be)return Y;be=1;let o=!1;return Y.logging=o,Y.setLogging=a=>{o=a},Y.log=(...a)=>o?console.log.apply(this,a):null,Y}var te,ke;function Ve(){if(ke)return te;ke=1;const o=He(),{log:a}=Re(),t=we();let c=0;return te=()=>{const i=t("Scheduler",c),l={},p={};let w=[];c+=1;const P=()=>w.length,b=()=>Object.keys(l).length,I=()=>{if(w.length!==0){const m=Object.keys(l);for(let R=0;R<m.length;R+=1)if(typeof p[m[R]]>"u"){w[0](l[m[R]]);break}}},y=(m,R)=>new Promise((U,S)=>{const v=o({action:m,payload:R});w.push(async k=>{w.shift(),p[k.id]=v;try{U(await k[m].apply(this,[...R,v.id]))}catch(A){S(A)}finally{delete p[k.id],I()}}),a(`[${i}]: Add ${v.id} to JobQueue`),a(`[${i}]: JobQueue length=${w.length}`),I()});return{addWorker:m=>(l[m.id]=m,a(`[${i}]: Add ${m.id}`),a(`[${i}]: Number of workers=${b()}`),I(),m.id),addJob:async(m,...R)=>{if(b()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return y(m,R)},terminate:async()=>{Object.keys(l).forEach(async m=>{await l[m].terminate()}),w=[]},getQueueLen:P,getNumWorkers:b}},te}function Ze(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ne,Te;function Qe(){return Te||(Te=1,ne=o=>{const a={};return typeof WorkerGlobalScope<"u"?a.type="webworker":typeof document=="object"?a.type="browser":typeof process=="object"&&typeof Ze=="function"&&(a.type="node"),typeof o>"u"?a:a[o]}),ne}var oe,Ae;function Xe(){if(Ae)return oe;Ae=1;const a=Qe()("type")==="browser"?t=>new URL(t,window.location.href).href:t=>t;return oe=t=>{const c={...t};return["corePath","workerPath","langPath"].forEach(i=>{t[i]&&(c[i]=a(c[i]))}),c},oe}var ae,_e;function $e(){return _e||(_e=1,ae={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ae}const er="7.0.0",rr={version:er};var ie,Ce;function tr(){return Ce||(Ce=1,ie={workerBlobURL:!0,logger:()=>{}}),ie}var se,Ne;function nr(){if(Ne)return se;Ne=1;const o=rr.version;return se={...tr(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${o}/dist/worker.min.js`},se}var ce,Me;function or(){return Me||(Me=1,ce=({workerPath:o,workerBlobURL:a})=>{let t;if(Blob&&URL&&a){const c=new Blob([`importScripts("${o}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(c))}else t=new Worker(o);return t}),ce}var ue,Pe;function ar(){return Pe||(Pe=1,ue=o=>{o.terminate()}),ue}var le,Ie;function ir(){return Ie||(Ie=1,le=(o,a)=>{o.onmessage=({data:t})=>{a(t)}}),le}var fe,qe;function sr(){return qe||(qe=1,fe=async(o,a)=>{o.postMessage(a)}),fe}var de,De;function cr(){if(De)return de;De=1;const o=t=>new Promise((c,i)=>{const l=new FileReader;l.onload=()=>{c(l.result)},l.onerror=({target:{error:{code:p}}})=>{i(Error(`File could not be read! Code=${p}`))},l.readAsArrayBuffer(t)}),a=async t=>{let c=t;if(typeof t>"u")return"undefined";if(typeof t=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(t)?c=atob(t.split(",")[1]).split("").map(i=>i.charCodeAt(0)):c=await(await fetch(t)).arrayBuffer();else if(typeof HTMLElement<"u"&&t instanceof HTMLElement)t.tagName==="IMG"&&(c=await a(t.src)),t.tagName==="VIDEO"&&(c=await a(t.poster)),t.tagName==="CANVAS"&&await new Promise(i=>{t.toBlob(async l=>{c=await o(l),i()})});else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas){const i=await t.convertToBlob();c=await o(i)}else(t instanceof File||t instanceof Blob)&&(c=await o(t));return new Uint8Array(c)};return de=a,de}var he,Ge;function ur(){if(Ge)return he;Ge=1;const o=nr(),a=or(),t=ar(),c=ir(),i=sr(),l=cr();return he={defaultOptions:o,spawnWorker:a,terminateWorker:t,onMessage:c,send:i,loadImage:l},he}var pe,We;function xe(){if(We)return pe;We=1;const o=Xe(),a=He(),{log:t}=Re(),c=we(),i=$e(),{defaultOptions:l,spawnWorker:p,terminateWorker:w,onMessage:P,loadImage:b,send:I}=ur();let y=0;return pe=async(M="eng",q=i.LSTM_ONLY,$={},m={})=>{const R=c("Worker",y),{logger:U,errorHandler:S,...v}=o({...l,...$}),k={},A=typeof M=="string"?M.split("+"):M;let B=q,F=m;const j=[i.DEFAULT,i.LSTM_ONLY].includes(q)&&!v.legacyCore;let D,x;const H=new Promise((f,d)=>{x=f,D=d}),Z=f=>{D(f.message)};let G=p(v);G.onerror=Z,y+=1;const _=({id:f,action:d,payload:g})=>new Promise((C,N)=>{t(`[${R}]: Start ${f}, action=${d}`);const W=`${d}-${f}`;k[W]={resolve:C,reject:N},I(G,{workerId:R,jobId:f,action:d,payload:g})}),z=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),J=f=>_(a({id:f,action:"load",payload:{options:{lstmOnly:j,corePath:v.corePath,logging:v.logging}}})),K=(f,d,g)=>_(a({id:g,action:"FS",payload:{method:"writeFile",args:[f,d]}})),V=(f,d)=>_(a({id:d,action:"FS",payload:{method:"readFile",args:[f,{encoding:"utf8"}]}})),r=(f,d)=>_(a({id:d,action:"FS",payload:{method:"unlink",args:[f]}})),e=(f,d,g)=>_(a({id:g,action:"FS",payload:{method:f,args:d}})),n=(f,d)=>_(a({id:d,action:"loadLanguage",payload:{langs:f,options:{langPath:v.langPath,dataPath:v.dataPath,cachePath:v.cachePath,cacheMethod:v.cacheMethod,gzip:v.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(B)&&!v.legacyLang}}})),u=(f,d,g,C)=>_(a({id:C,action:"initialize",payload:{langs:f,oem:d,config:g}})),s=(f="eng",d,g,C)=>{if(j&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(d))throw Error("Legacy model requested but code missing.");const N=d||B;B=N;const W=g||F;F=W;const Q=(typeof f=="string"?f.split("+"):f).filter(Je=>!A.includes(Je));return A.push(...Q),Q.length>0?n(Q,C).then(()=>u(f,N,W,C)):u(f,N,W,C)},h=(f={},d)=>_(a({id:d,action:"setParameters",payload:{params:f}})),L=async(f,d={},g={text:!0},C)=>_(a({id:C,action:"recognize",payload:{image:await b(f),options:d,output:g}})),O=async(f,d)=>{if(j)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return _(a({id:d,action:"detect",payload:{image:await b(f)}}))},T=async()=>(G!==null&&(w(G),G=null),Promise.resolve());P(G,({workerId:f,jobId:d,status:g,action:C,data:N})=>{const W=`${C}-${d}`;if(g==="resolve")t(`[${f}]: Complete ${d}`),k[W].resolve({jobId:d,data:N}),delete k[W];else if(g==="reject")if(k[W].reject(N),delete k[W],C==="load"&&D(N),S)S(N);else throw Error(N);else g==="progress"&&U({...N,userJobId:d})});const E={id:R,worker:G,load:z,writeText:K,readText:V,removeFile:r,FS:e,reinitialize:s,setParameters:h,recognize:L,detect:O,terminate:T};return J().then(()=>n(M)).then(()=>u(M,q,m)).then(()=>x(E)).catch(()=>{}),H},pe}var ge,Ue;function lr(){if(Ue)return ge;Ue=1;const o=xe();return ge={recognize:async(c,i,l)=>{const p=await o(i,1,l);return p.recognize(c).finally(async()=>{await p.terminate()})},detect:async(c,i)=>{const l=await o("osd",0,i);return l.detect(c).finally(async()=>{await l.terminate()})}},ge}var me,je;function fr(){return je||(je=1,me={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),me}var ve,Be;function dr(){return Be||(Be=1,ve={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),ve}var ye,Fe;function hr(){if(Fe)return ye;Fe=1,Ye();const o=Ve(),a=xe(),t=lr(),c=fr(),i=$e(),l=dr(),{setLogging:p}=Re();return ye={languages:c,OEM:i,PSM:l,createScheduler:o,createWorker:a,setLogging:p,...t},ye}var pr=hr();const gr=Ke(pr);chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"scan_deepfake",title:"TrueLens: Check Deepfake",contexts:["image"]}),chrome.contextMenus.create({id:"scan_fakenews",title:"TrueLens: Check Fake News (Selection)",contexts:["selection"]})});chrome.contextMenus.onClicked.addListener(async(o,a)=>{o.menuItemId==="scan_deepfake"?await vr(o.srcUrl,a.id):o.menuItemId==="scan_fakenews"&&await Se(o.selectionText,a.id)});chrome.runtime.onMessage.addListener((o,a,t)=>(o.type==="CHECK_FAKE_NEWS"?Se(o.text,a.tab?.id||ze()):o.type==="CAPTURE_AND_CROP"&&mr(o.area,a.tab.id),!0));async function mr(o,a){chrome.tabs.sendMessage(a,{type:"SHOW_LOADING",message:"Capturing and Extracting Text..."});try{const t=await chrome.tabs.captureVisibleTab(null,{format:"png"}),i=await(await fetch(t)).blob(),l=await createImageBitmap(i),p=new OffscreenCanvas(o.width*o.devicePixelRatio,o.height*o.devicePixelRatio);p.getContext("2d").drawImage(l,o.x*o.devicePixelRatio,o.y*o.devicePixelRatio,o.width*o.devicePixelRatio,o.height*o.devicePixelRatio,0,0,o.width*o.devicePixelRatio,o.height*o.devicePixelRatio);const b=await(await p.convertToBlob({type:"image/png"})).arrayBuffer(),y=`data:image/png;base64,${btoa(new Uint8Array(b).reduce((M,q)=>M+String.fromCharCode(q),""))}`;yr(y,a)}catch(t){console.error("Capture failed:",t),chrome.tabs.sendMessage(a,{type:"SHOW_ERROR",message:"Capture failed: "+t.message})}}async function ze(){const[o]=await chrome.tabs.query({active:!0,currentWindow:!0});return o?.id}async function Se(o,a){if(!a){const t=await ze();if(t)a=t;else return}chrome.runtime.sendMessage({type:"SCAN_START"}).catch(()=>{});try{const t=new URL("https://truelens-fact-check-api.onrender.com/fact-check");t.searchParams.append("text",o);const c=await fetch(t.toString(),{method:"POST",headers:{Accept:"application/json"}}),i=await c.text();let l;try{l=JSON.parse(i)}catch{throw console.error("Failed to parse JSON:",i),new Error(`Invalid API response format (not JSON). Status: ${c.status}`)}if(!c.ok)throw new Error(l.detail?.[0]?.msg||l.error||`API Error: ${c.status}`);chrome.runtime.sendMessage({type:"SCAN_RESULT",data:l}),chrome.tabs.sendMessage(a,{type:"SHOW_RESULT",data:l,kind:"fakenews"})}catch(t){console.error(t),chrome.runtime.sendMessage({type:"SCAN_ERROR",error:t.message}),chrome.tabs.sendMessage(a,{type:"SHOW_ERROR",message:"Fact check failed: "+t.message})}}async function vr(o,a){chrome.tabs.sendMessage(a,{type:"SHOW_LOADING",message:"Analyzing image for Deepfake..."}),chrome.runtime.sendMessage({type:"SCAN_START"}).catch(()=>{});try{const c=await(await fetch(o)).blob(),i=new FormData;i.append("files",c,"image.png");const w=(await(await fetch("https://chitranshsahu-deepfake-detection.hf.space/upload",{method:"POST",body:i})).json())[0],b=await(await fetch("https://chitranshsahu-deepfake-detection.hf.space/run/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[{name:w,data:null,is_file:!0}],fn_index:2})})).json();if(console.log("Deepfake Result:",b),b.data)chrome.runtime.sendMessage({type:"SCAN_RESULT",data:b.data}),chrome.tabs.sendMessage(a,{type:"SHOW_RESULT",data:b.data,kind:"deepfake"});else throw new Error("Deepfake API returned no data. It might be busy or requires a queue.")}catch(t){console.error(t),chrome.tabs.sendMessage(a,{type:"SHOW_ERROR",message:"Deepfake check failed: "+t.message}),chrome.runtime.sendMessage({type:"SCAN_ERROR",error:t.message})}}async function yr(o,a){chrome.tabs.sendMessage(a,{type:"SHOW_LOADING",message:"Extracting text..."}),chrome.runtime.sendMessage({type:"SCAN_START"}).catch(()=>{});try{const c=(await gr.recognize(o,"eng",{logger:i=>console.log(i)})).data.text;if(console.log("OCR Text:",c),!c||c.trim().length===0)throw new Error("No text found in area.");await Se(c,a)}catch(t){console.error(t),chrome.tabs.sendMessage(a,{type:"SHOW_ERROR",message:"OCR failed: "+t.message}),chrome.runtime.sendMessage({type:"SCAN_ERROR",error:t.message})}}
